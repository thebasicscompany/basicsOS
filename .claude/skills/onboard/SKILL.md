---
name: onboard
description: First-time setup wizard. Installs dependencies, configures the database, and gives you a full tour of Basics OS.
---

# Skill: Onboard

## When to Use

Run this when you've just cloned the repo, are a new developer, or want a guided setup of Basics OS. This replaces manually reading the README and running CLI scripts — one command does everything.

## Phase 1: Gather Info

Use AskUserQuestion to collect setup preferences. Ask all four questions at once:

### Question 1 — Company name
- Header: "Company"
- Question: "What's your company name?"
- Options:
  - "Acme Corp (Recommended)" — Use the default for demo/exploration
  - "Custom" — Enter your own company name
- If they pick Custom, ask a follow-up text question for the name

### Question 2 — Apps to install
- Header: "Apps"
- Question: "Which apps do you want to install?"
- multiSelect: true
- Options:
  - "Web portal (Recommended)" — Next.js — the main UI
  - "Desktop app" — Electron overlay — macOS/Windows/Linux (~200 MB extra)
  - "Mobile app" — Expo — iOS & Android (~500 MB extra)
  - "MCP servers" — Claude/ChatGPT tool integration

### Question 3 — Database setup
- Header: "Database"
- Question: "How should we set up the database?"
- Options:
  - "Docker (Recommended)" — Starts PostgreSQL + Redis automatically
  - "Custom URLs" — I already have PostgreSQL and Redis running
- If they pick Custom URLs, ask follow-up questions for DATABASE_URL and REDIS_URL

### Question 4 — AI features
- Header: "AI"
- Question: "Want to configure AI features now?"
- Options:
  - "Skip for now (Recommended)" — Everything works without AI, configure later
  - "Anthropic API key" — Claude — best results
  - "OpenAI API key" — GPT-4o
  - "BasicOS managed key" — basicsos.com/keys — covers all models
- If they pick a provider, ask a follow-up for their API key

Store answers in variables for Phase 2:
- `$COMPANY_NAME` (string, default "Acme Corp")
- `$SELECTED_APPS` (array of: web, desktop, mobile, mcp)
- `$DB_SETUP` (docker | custom)
- `$DATABASE_URL` (default: postgresql://basicos:basicos_dev@localhost:5432/basicos)
- `$REDIS_URL` (default: redis://localhost:6379)
- `$AI_PROVIDER` (skip | anthropic | openai | managed)
- `$AI_KEY` (string or empty)

## Phase 2: Run Setup

Execute each step as an **individual Bash command** so you can diagnose failures at each point. Do NOT call `bun scripts/create-basicos.ts` — run each step directly.

### Step 1: Check prerequisites

```bash
bun --version
node --version
docker --version
```

If any is missing, tell the user exactly how to install it:
- bun: `curl -fsSL https://bun.sh/install | bash`
- node: https://nodejs.org/ (v20+)
- docker: https://www.docker.com/products/docker-desktop/

Stop and wait for them to install before continuing.

### Step 2: Patch package.json workspaces

Read `package.json`, then Edit the `"workspaces"` array to include only:
- `"packages/*"` (always)
- `"apps/web"` (if web selected)
- `"apps/desktop"` (if desktop selected)
- `"apps/mobile"` (if mobile selected)
- `"apps/mcp/*"` (if mcp selected)

Before patching, stash the full workspaces array in `"_workspacesAll"` (same as `create-basicos.ts` does) so it can be restored later.

### Step 3: Generate `.env`

Only if `.env` does not already exist. Use the Write tool to create it:

```
# BasicOS — generated by /onboard on <date>
BASICOS_COMPANY_NAME="$COMPANY_NAME"
DATABASE_URL="$DATABASE_URL"
REDIS_URL="$REDIS_URL"
BETTER_AUTH_SECRET="<random 64 hex chars>"
BETTER_AUTH_URL=http://localhost:3000
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3001
EXPO_PUBLIC_APP_URL=http://localhost:3000

# AI features
<AI_KEY_VAR>="$AI_KEY"  (or commented-out placeholders if skipped)

BASICOS_ACCENT_COLOR="#6366f1"
```

Generate `BETTER_AUTH_SECRET` with:
```bash
openssl rand -hex 32
```

AI key variable mapping:
- anthropic → `ANTHROPIC_API_KEY`
- openai → `OPENAI_API_KEY`
- managed → `AI_API_KEY` (also add `AI_API_URL="https://api.basicsos.com"`)

### Step 4: Install dependencies

```bash
bun install
```

This respects the patched workspaces — only selected apps get installed.

### Step 5: Start Docker (if Docker setup selected)

```bash
docker compose up -d postgres redis
```

Then poll until the database is ready:

```bash
docker compose exec -T postgres pg_isready -U basicos
```

Retry up to 15 times with 2-second intervals. If it times out, warn but continue.

### Step 6: Run migrations

```bash
bun db:migrate
```

### Step 7: Seed demo data

```bash
bun db:seed
```

## Phase 3: Verify

Run these checks and present a summary checklist:

```bash
# Docker containers running (if Docker setup)
docker compose ps

# Database accepting connections
docker compose exec -T postgres pg_isready -U basicos

# Check .env has required keys (without logging values)
grep -c "DATABASE_URL\|REDIS_URL\|BETTER_AUTH_SECRET\|BETTER_AUTH_URL" .env
```

Present results as a checklist:

```
Setup verification:
- [x] Docker containers running (postgres, redis)
- [x] Database accepting connections
- [x] .env has all required keys (4/4)
- [x] Dependencies installed
- [x] Migrations applied
- [x] Demo data seeded
```

Mark any failures with `[ ]` and provide the fix command.

## Phase 4: Orient

Now explain the system directly to the user. Don't say "read CLAUDE.md" — they haven't read it yet. Give them the knowledge right here.

### What you just installed

Basics OS is an open-source company operating system. It has these modules:

| Module | What it does |
|--------|-------------|
| **Knowledge Base** | Rich-text docs with real-time collaboration, full-text + vector search |
| **CRM** | Contacts, companies, deals with a 6-stage Kanban pipeline |
| **Tasks** | Kanban board with priorities, due dates, assignees |
| **Meetings** | Paste/record transcripts, get AI summaries with action items |
| **Hub** | Bookmark links, connect Slack/Google Drive/GitHub via OAuth |
| **AI Assistant** | Streaming chat grounded in your company data via RAG |
| **AI Employees** | Autonomous jobs with human-in-the-loop approval |
| **Automations** | Event-driven workflows (trigger + action chains) |

### Architecture in one paragraph

Every platform (web, desktop, mobile, MCP) connects to **one tRPC API** which talks to **one PostgreSQL database** (with pgvector for embeddings and row-level security for tenant isolation). Every mutation emits an event through **EventBus** which feeds into **BullMQ workers** for async processing — embedding generation, meeting summaries, notifications, AI employee jobs, and automation execution.

### Start your dev servers

Tailor this to their selected apps:

```bash
# Always start the API first
bun --filter @basicsos/api dev     # API on :3001

# Then your selected apps:
bun --filter @basicsos/web dev     # Web on :3000
bun --filter @basicsos/desktop dev # Desktop (requires web on :3000)
bun --filter @basicsos/mobile start # Mobile
REPO_ROOT=$PWD bun --filter @basicsos/mcp-engineer dev  # Engineer MCP on :4001
```

Only show commands for apps they selected.

### Demo login

```
Email:    admin@acme.example.com
Password: password
```

Open http://localhost:3000 after starting web + API.

### Key files to know

| File | What it is |
|------|-----------|
| `CLAUDE.md` | Full developer guide — code rules, patterns, component library |
| `packages/api/src/routers/` | All tRPC routers (one per module) |
| `packages/db/src/schema/` | All database tables (Drizzle ORM) |
| `packages/ui/src/components/` | Shared React component library |
| `apps/web/src/app/(dashboard)/` | All web pages |
| `context/` | Deep-dive docs for every area of the codebase |

### Available skills

| Command | What it does |
|---------|-------------|
| `/navigate-codebase` | Load context for any task — **run this before building anything** |
| `/new-module` | Scaffold a complete new module (schema + router + UI + tests) |
| `/add-field` | Add a column with migration, validator, and router updates |
| `/new-api-endpoint` | Create a tRPC procedure with input validation and events |
| `/new-view` | Build a dashboard page with data fetching and forms |
| `/new-mcp-tool` | Expose a tRPC procedure as an MCP tool |
| `/testing-patterns` | Test conventions and patterns |
| `/ui-components` | Component patterns, design tokens, form + mutation recipes |

### Next step

Tell the user:

> Your next step: run `/navigate-codebase` before building anything. It loads exactly the right context files for whatever you're working on.

## Error Recovery

If any step fails, diagnose and fix before continuing:

| Error | Cause | Fix |
|-------|-------|-----|
| `bun: command not found` | Bun not installed | `curl -fsSL https://bun.sh/install | bash` then restart shell |
| `node: command not found` | Node not installed | Install from https://nodejs.org/ (v20+) |
| `docker: command not found` | Docker not installed | Install Docker Desktop |
| `docker compose up` fails | Docker Desktop not running | Start Docker Desktop, wait 30s, retry |
| `pg_isready` times out | Database still starting | Wait 30 more seconds: `sleep 30 && docker compose exec -T postgres pg_isready -U basicos` |
| `bun db:migrate` fails with connection error | Database not ready yet | Check `docker compose ps`, ensure postgres is "healthy", retry |
| `bun db:migrate` fails with SQL error | Schema issue | Read the error, check `packages/db/src/migrations/` for the failing migration |
| `bun install` fails | Network or lockfile issue | Try `bun install --no-cache` |
| `.env already exists` | Previous setup run | Ask user if they want to keep it or regenerate |
| Port 3000/3001 in use | Another process running | `lsof -i :3000` to find it, ask user before killing |
